<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ayuda - Lampreas Violeta</title>
    <style>
        /* Estilo limpio tipo GitHub / Markdown */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
        }
        h1 { border-bottom: 2px solid #eaecef; padding-bottom: 10px; color: #6f42c1; /* Violeta */ }
        h2 { border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; margin-top: 30px; }
        h3 { color: #586069; }

        code {
            background-color: #f6f8fa;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, monospace;
            font-size: 90%;
            color: #d73a49;
        }
        pre {
            background-color: #f6f8fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #e1e4e8;
        }
        .note {
            background-color: #fff5b1;
            padding: 15px;
            border-left: 5px solid #f9c513;
            margin: 20px 0;
        }
        .success {
            background-color: #dcffe4;
            padding: 15px;
            border-left: 5px solid #28a745;
            margin: 20px 0;
        }
        ul { padding-left: 20px; }
        li { margin-bottom: 5px; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #dfe2e5; padding: 10px; text-align: left; }
        th { background-color: #f6f8fa; }
    </style>
</head>
<body>

<h1> Lampreas Violeta - Gesti贸n Log铆stica</h1>
<p>
    Bienvenido a la documentaci贸n oficial de <strong>Lampreas Violeta App</strong>.
    Este sistema permite la gesti贸n integral de clientes, inventario, pedidos y seguimiento de env铆os
    utilizando una base de datos PostgreSQL.
</p>

<h2> Tecnolog铆as Utilizadas</h2>
<ul>
    <li><strong>Lenguaje:</strong> Java 17+ (OpenJDK)</li>
    <li><strong>Interfaz Gr谩fica:</strong> JavaFX (con FXML y CSS)</li>
    <li><strong>Base de Datos:</strong> PostgreSQL</li>
    <li><strong>Persistencia:</strong> JDBC (DAO Pattern)</li>
    <li><strong>Formatos:</strong> Jackson (JSON) para copias de seguridad.</li>
</ul>

<h2> Primeros Pasos</h2>

<h3>1. Configuraci贸n de Base de Datos</h3>
<p>Para que la aplicaci贸n funcione, es necesario ejecutar el script de inicializaci贸n SQL en tu servidor PostgreSQL.</p>
<pre><code>-- Ejemplo de creaci贸n r谩pida
CREATE DATABASE lampreas_db;
-- Ejecutar el script schema.sql proporcionado en el repositorio
-- Localizado en el directorio ./resources
</code></pre>

<h3>2. Conexi贸n</h3>
<p>Aseg煤rate de configurar el archivo <code>db.Db</code> con tus credenciales locales:</p>
<pre><code>...System.getenv().getOrDefault("PG_HOST", "localhost");
    ...System.getenv().getOrDefault("PG_PORT", "5432");
    ...System.getenv().getOrDefault("PG_DB", "violeta_db");
    ...System.getenv().getOrDefault("PG_USER", "violeta_user");
    ...System.getenv().getOrDefault("PG_PASS", "violeta_1234");

    O directamente en la direccion URL:
    private static final String URL = "jdbc:postgresql://" + HOST + ":" + PORT + "/" + DB;</code></pre>

<h2> M贸dulos del Sistema</h2>

<h3> Gesti贸n de Clientes</h3>
<p>Permite dar de alta nuevos clientes y asociar sus detalles de contacto.</p>
<ul>
    <li><strong>Datos Generales:</strong> ID, Nombre, Email.</li>
    <li><strong>Detalles:</strong> Direcci贸n, Tel茅fono y Notas (se almacenan en una tabla vinculada <code>detalle_cliente</code>).</li>
    <li><strong>B煤squeda:</strong> Filtra en tiempo real por ID, nombre o email.</li>
</ul>

<h3> Productos</h3>
<p>Gesti贸n del cat谩logo de productos. </p>
<ul>
    <li>Control de precios unitarios hist贸ricos.</li>
    <li><strong>B煤squeda:</strong> Filtra en tiempo real nombre de producto.</li>
</ul>

<h3> Pedidos </h3>
<p>Creaci贸n de 贸rdenes de compra.</p>
<ul>
    <li>Control de precios unitarios hist贸ricos.</li>
    <li>C谩lculo autom谩tico de importes totales.</li>
    <li>Guardado de transaccion completa.</li>
    <li>Manejo de fechas.</li>
    <li>Gesti贸n de envios, y bloqueo de edici贸n de pedidos en envio.</li>
    <li>Busqueda pendiente de implementaci贸n. </li>
</ul>

<h3> Gestion de Repartos</h3>
<p>M贸dulo avanzado para el control de empresas de reparto y repartidores</p>
<ul>
    <li>Creaci贸n de repartidores y empresas de transporte.</li>
    <li>Asignacion de telefonos y direcciones de las empresas. </li>
    <li>Acceso a datos de repartidor, para el seguimiento de los envios. </li>
</ul>

<h3> Gestion de Envios</h3>
<p>M贸dulo para la gestion de envios.</p>
<ul>
    <li>Consulta del estado de los envios.</li>
    <li>Estados del env铆o: <code>EN_PREPARACION</code>, <code>EN_REPARTO</code>, <code>ENTREGADO</code>.</li>
    <li>Las tablas se actualizan autom谩ticamente al cambiar el estado.</li>
</ul>

<h2> Copias de Seguridad (JSON)</h2>

<div class="note">
    <strong>Importante:</strong> El sistema de Importaci贸n/Exportaci贸n funciona en dos fases para garantizar la seguridad de los datos.
</div>

<h3>Exportar (Backup)</h3>
<p>Guarda una "foto" completa de la base de datos actual en un archivo <code>.json</code>. Incluye clientes, pedidos, productos, empresas de reparto, repartidores y env铆os.</p>

<h3>Importar (Restaurar)</h3>
<ol>
    <li><strong>Carga en Memoria:</strong> Al seleccionar un archivo JSON, los datos se visualizan en las tablas pero <strong>NO</strong> se guardan en la BD todav铆a.</li>
    <li><strong>Revisi贸n:</strong> Puedes verificar que los datos sean correctos.</li>
    <li><strong>No es posible realizar busquedas en memoria</strong> .</li>
    <li><strong>Guardar en BD:</strong> Al pulsar "Guardar en BD", el sistema:
        <ul>
            <li>Borra los datos antiguos (Reset completo).</li>
            <li>Restaura la estructura de tablas.</li>
            <li>Inserta los datos nuevos.</li>
            <li>Sincroniza las secuencias (autoincrementales).</li>
        </ul>
    </li>
</ol>

<div class="success">
    <strong>Tip:</strong> Si la importaci贸n falla, el sistema har谩 un <em>Rollback</em> autom谩tico y tu base de datos quedar谩 intacta.
</div>

<h3>Informaci贸n adicional incluida en carpeta Data </h3>
<p>La carpeta data, contiene dos copias de seguridad de datos en formato Json</p>
<pre><code>Si usas backup_lampreas_2025-12-31.json
Da fallo en importaci贸n, tiene campos nulos en repartidor.
- Usado para probar RollBack
- Usado para testear mensajes de pantalla emergentes

Si usas backup_lampreas_2026-01-01.json
- Importacion correcta
- Todos los campos escritos en Base de Datos
</code></pre>

<h2> Soporte</h2>
<p>Desarrollado por el equipo de desarrollo de Lampreas Violeta.</p>
<p><em>Versi贸n 1.0.0 - 2025</em></p>

</body>
</html>